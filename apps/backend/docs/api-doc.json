{
  "openapi": "3.0.4",
  "info": {
    "title": "مُختصِر - واجهة برمجة التطبيقات الخاصة بمُختصِر",
    "description": "هذه هي مواصفات واجهة برمجة التطبيقات لمُختصِر التي تتيح لك الوصول برمجياً إلى خدمتنا لتحويل الروابط الطويلة إلى روابط مختصرة\n\nالميزات:\n- إنشاء روابط مختصرة (مع أو بدون أسماء مستعارة مخصصة)\n- تحديث وحذف الروابط المختصرة\n- تتبع الإحصائيات الأساسية (النقرات، المرجع، إلخ)\n",
    "contact": {
      "email": "support@mukhtasar.pro"
    },
    "version": "1.0.0"
  },
  "servers": [
    {
      "url": "https://api.mukhtasar.pro/api"
    }
  ],
  "tags": [
    {
      "name": "Url",
      "description": "الروابط المختصرة التي تعيد التوجيه إلى الروابط الأصلية الطويلة. تتيح لك نقاط النهاية هذه اختصار روابط جديدة وتعديل كيفية عملها"
    },
    {
      "name": "Analytics",
      "description": "إحصائيات وتحليلات الروابط المختصرة تشمل عدد النقرات، المتصفحات، الأجهزة، والمواقع الجغرافية"
    }
  ],
  "paths": {
    "/url": {
      "post": {
        "tags": [
          "Url"
        ],
        "summary": "إنشاء رابط مختصر جديد",
        "description": "تحويل رابط طويل إلى رابط مختصر جديد",
        "operationId": "createUrl",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "original_url": {
                    "type": "string",
                    "format": "uri",
                    "description": "الرابط الأصلي الطويل المراد اختصاره",
                    "example": "https://www.example.com/products/12354?utm_source=newsletter"
                  },
                  "alias": {
                    "type": "string",
                    "description": "اسم مستعار مخصص اختياري",
                    "example": "myexamplelink"
                  },
                  "domain": {
                    "type": "string",
                    "description": "النطاق المراد استخدامه للرابط المختصر",
                    "example": "mukhtasar.pro"
                  },
                  "description": {
                    "type": "string",
                    "description": "وصف للرابط المختصر",
                    "example": "رابط صفحة المنتج"
                  }
                },
                "required": [
                  "original_url"
                ]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "تم إنشاء الرابط بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "short_url": {
                          "type": "string",
                          "format": "uri",
                          "example": "https://mukhtasar.pro/myexamplelink"
                        },
                        "alias": {
                          "type": "string",
                          "example": "myexamplelink"
                        },
                        "domain": {
                          "type": "string",
                          "example": "mukhtasar.pro"
                        },
                        "original_url": {
                          "type": "string",
                          "format": "uri",
                          "example": "https://www.example.com/products/12354"
                        },
                        "created_at": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2025-01-24T19:41:23+00:00"
                        }
                      }
                    },
                    "errors": {
                      "type": "array",
                      "items": {},
                      "example": []
                    },
                    "code": {
                      "type": "number",
                      "example": 0
                    },
                    "errorCode": {
                      "type": "string",
                      "example": "NO_ERROR"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "409": {
            "$ref": "#/components/responses/ConflictError"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          },
          "429": {
            "$ref": "#/components/responses/RateLimitExceeded"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/url/{domain}/{alias}": {
      "get": {
        "tags": [
          "Url"
        ],
        "summary": "معلومات الرابط المختصر",
        "description": "تفاصيل الرابط المختصر، بما في ذلك الرابط الأصلي والنطاق والاسم المستعار والبيانات الوصفية الأخرى .\n",
        "operationId": "getShortUrlInfo",
        "parameters": [
          {
            "name": "alias",
            "in": "path",
            "description": "الاسم المستعار للرابط المختصر المراد البحث عنه",
            "required": true,
            "schema": {
              "type": "string",
              "example": "myalias123"
            }
          },
          {
            "name": "domain",
            "in": "path",
            "description": "نطاق الرابط المختصر المراد البحث عنه",
            "required": true,
            "schema": {
              "type": "string",
              "example": "mukhtasar.pro"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم العثور على سجل الرابط المختصر",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "original_url": {
                          "type": "string",
                          "format": "uri",
                          "example": "https://www.example.com/blog/post?id=42"
                        },
                        "short_url": {
                          "type": "string",
                          "example": "https://mukhtasar.pro/xYz123"
                        },
                        "alias": {
                          "type": "string",
                          "example": "xYz123"
                        },
                        "domain": {
                          "type": "string",
                          "example": "mukhtasar.pro"
                        },
                        "created_at": {
                          "type": "string",
                          "format": "date-time",
                          "example": "2025-01-24T19:41:23+00:00"
                        },
                        "description": {
                          "type": "string",
                          "example": "رابط أهم 10 منتجات لهذا الشهر."
                        }
                      }
                    },
                    "errors": {
                      "type": "array",
                      "items": {},
                      "example": []
                    },
                    "code": {
                      "type": "number",
                      "example": 0
                    },
                    "errorCode": {
                      "type": "string",
                      "example": "NO_ERROR"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "405": {
            "$ref": "#/components/responses/MethodNotAllowed"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          },
          "429": {
            "$ref": "#/components/responses/RateLimitExceeded"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      },
      "patch": {
        "tags": [
          "Url"
        ],
        "summary": "تحديث الرابط الأصلي المرتبط بالرابط المختصر",
        "description": "يتيح تحديث الرابط الأصلي المرتبط برابط مختصر موجود.",
        "operationId": "updateUrl",
        "parameters": [
          {
            "name": "alias",
            "in": "path",
            "description": "الاسم المستعار للرابط المختصر المراد تحديثه",
            "required": true,
            "schema": {
              "type": "string",
              "example": "myalias123"
            }
          },
          {
            "name": "domain",
            "in": "path",
            "description": "نطاق الرابط المختصر المراد تحديثه",
            "required": true,
            "schema": {
              "type": "string",
              "example": "mukhtasar.pro"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "original_url": {
                    "type": "string",
                    "format": "uri",
                    "description": "الرابط الأصلي الجديد للتوجيه إليه",
                    "example": "https://www.example.com/new-destination"
                  }
                },
                "required": [
                  "original_url"
                ]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "تم تحديث الرابط بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "url": {
                          "type": "string",
                          "format": "uri",
                          "example": "https://www.example.com/new-destination"
                        },
                        "alias": {
                          "type": "string",
                          "example": "myalias123"
                        },
                        "domain": {
                          "type": "string",
                          "example": "mukhtasar.pro"
                        }
                      }
                    },
                    "errors": {
                      "type": "array",
                      "items": {},
                      "example": []
                    },
                    "code": {
                      "type": "number",
                      "example": 0
                    },
                    "errorCode": {
                      "type": "string",
                      "example": "NO_ERROR"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          },
          "429": {
            "$ref": "#/components/responses/RateLimitExceeded"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      },
      "delete": {
        "tags": [
          "Url"
        ],
        "summary": "حذف الرابط المختصر",
        "description": "حذف رابط مختصر بناءً على النطاق والاسم المستعار المقدمين.",
        "operationId": "deleteUrl",
        "parameters": [
          {
            "name": "alias",
            "in": "path",
            "description": "الاسم المستعار للرابط المختصر المراد حذفه",
            "required": true,
            "schema": {
              "type": "string",
              "example": "myalias123"
            }
          },
          {
            "name": "domain",
            "in": "path",
            "description": "نطاق الرابط المختصر المراد حذفه",
            "required": true,
            "schema": {
              "type": "string",
              "example": "mukhtasar.pro"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم حذف الرابط بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "description": "بيانات الاستجابة من عملية الحذف"
                    },
                    "errors": {
                      "type": "array",
                      "items": {},
                      "example": []
                    },
                    "code": {
                      "type": "number",
                      "example": 0
                    },
                    "errorCode": {
                      "type": "string",
                      "example": "NO_ERROR"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          },
          "429": {
            "$ref": "#/components/responses/RateLimitExceeded"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/url/{domain}/{alias}/count": {
      "get": {
        "tags": [
          "Url"
        ],
        "summary": "الحصول على عدد النقرات للرابط المختصر",
        "description": "إرجاع عدد المرات التي تم النقر فيها على الرابط المختصر",
        "operationId": "getUrlClickCounts",
        "parameters": [
          {
            "name": "alias",
            "in": "path",
            "description": "الاسم المستعار للرابط المختصر",
            "required": true,
            "schema": {
              "type": "string",
              "example": "myalias123"
            }
          },
          {
            "name": "domain",
            "in": "path",
            "description": "نطاق الرابط المختصر",
            "required": true,
            "schema": {
              "type": "string",
              "example": "mukhtasar.pro"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد عدد النقرات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "alias": {
                          "type": "string",
                          "example": "myalias123"
                        },
                        "domain": {
                          "type": "string",
                          "example": "mukhtasar.pro"
                        },
                        "clickCount": {
                          "type": "integer",
                          "example": 153
                        }
                      }
                    },
                    "errors": {
                      "type": "array",
                      "items": {},
                      "example": []
                    },
                    "code": {
                      "type": "number",
                      "example": 0
                    },
                    "errorCode": {
                      "type": "string",
                      "example": "NO_ERROR"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          },
          "429": {
            "$ref": "#/components/responses/RateLimitExceeded"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/analytics/overview": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "نظرة عامة على إحصائيات الرابط",
        "description": "الحصول على نظرة عامة سريعة لإحصائيات الرابط المختصر تشمل إجمالي النقرات والزوار الفريدين",
        "operationId": "getAnalyticsOverview",
        "parameters": [
          {
            "name": "alias",
            "in": "query",
            "description": "الاسم المستعار للرابط المختصر",
            "required": true,
            "schema": {
              "type": "string",
              "example": "myalias123"
            }
          },
          {
            "name": "startDate (UTC)",
            "in": "query",
            "description": "تاريخ البداية (افتراضي: 30 يوماً مضت)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2025-08-01T00:00:00.000Z"
            }
          },
          {
            "name": "endDate (UTC)",
            "in": "query",
            "description": "تاريخ النهاية (افتراضي: الآن)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2025-08-30T23:59:59.000Z"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد النظرة العامة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "object",
                      "properties": {
                        "total_clicks": {
                          "type": "integer",
                          "example": 1250
                        },
                        "unique_visitors": {
                          "type": "integer",
                          "example": 890
                        },
                        "active_days": {
                          "type": "integer",
                          "example": 25
                        },
                        "avg_clicks_per_day": {
                          "type": "number",
                          "example": 50.0
                        }
                      }
                    },
                    "errors": {
                      "type": "array",
                      "items": {},
                      "example": []
                    },
                    "code": {
                      "type": "number",
                      "example": 0
                    },
                    "errorCode": {
                      "type": "string",
                      "example": "NO_ERROR"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/RateLimitExceeded"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/analytics/browsers": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "إحصائيات المتصفحات",
        "description": "توزيع النقرات حسب نوع المتصفح",
        "operationId": "getBrowserStats",
        "parameters": [
          {
            "name": "alias",
            "in": "query",
            "description": "الاسم المستعار للرابط المختصر",
            "required": true,
            "schema": {
              "type": "string",
              "example": "myalias123"
            }
          },
          {
            "name": "startDate (UTC)",
            "in": "query",
            "description": "تاريخ البداية (افتراضي: 30 يوماً مضت)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2025-08-01T00:00:00.000Z"
            }
          },
          {
            "name": "endDate (UTC)",
            "in": "query",
            "description": "تاريخ النهاية (افتراضي: الآن)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2025-08-30T23:59:59.000Z"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد إحصائيات المتصفحات بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "browser": {
                            "type": "string",
                            "example": "Chrome"
                          },
                          "count": {
                            "type": "integer",
                            "example": 850
                          },
                          "percentage": {
                            "type": "number",
                            "example": 68.0
                          }
                        }
                      }
                    },
                    "errors": {
                      "type": "array",
                      "items": {},
                      "example": []
                    },
                    "code": {
                      "type": "number",
                      "example": 0
                    },
                    "errorCode": {
                      "type": "string",
                      "example": "NO_ERROR"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/RateLimitExceeded"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/analytics/devices": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "إحصائيات الأجهزة",
        "description": "توزيع النقرات حسب نوع الجهاز (موبايل، سطح المكتب، تابلت)",
        "operationId": "getDeviceStats",
        "parameters": [
          {
            "name": "alias",
            "in": "query",
            "description": "الاسم المستعار للرابط المختصر",
            "required": true,
            "schema": {
              "type": "string",
              "example": "myalias123"
            }
          },
          {
            "name": "startDate (UTC)",
            "in": "query",
            "description": "تاريخ البداية (افتراضي: 30 يوماً مضت)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2025-08-01T00:00:00.000Z"
            }
          },
          {
            "name": "endDate (UTC)",
            "in": "query",
            "description": "تاريخ النهاية (افتراضي: الآن)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2025-08-30T23:59:59.000Z"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد إحصائيات الأجهزة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "device": {
                            "type": "string",
                            "example": "Mobile"
                          },
                          "count": {
                            "type": "integer",
                            "example": 750
                          },
                          "percentage": {
                            "type": "number",
                            "example": 60.0
                          }
                        }
                      }
                    },
                    "errors": {
                      "type": "array",
                      "items": {},
                      "example": []
                    },
                    "code": {
                      "type": "number",
                      "example": 0
                    },
                    "errorCode": {
                      "type": "string",
                      "example": "NO_ERROR"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/RateLimitExceeded"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/analytics/clicks-over-time": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "النقرات عبر الوقت",
        "description": "تتبع النقرات على مدار فترة زمنية معينة مع إمكانية التجميع حسب اليوم، الساعة، الأسبوع، أو الشهر",
        "operationId": "getClicksOverTime",
        "parameters": [
          {
            "name": "alias",
            "in": "query",
            "description": "الاسم المستعار للرابط المختصر",
            "required": true,
            "schema": {
              "type": "string",
              "example": "myalias123"
            }
          },
          {
            "name": "startDate (UTC)",
            "in": "query",
            "description": "تاريخ البداية (افتراضي: 90 يوماً مضت)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2025-08-01T00:00:00.000Z"
            }
          },
          {
            "name": "endDate (UTC)",
            "in": "query",
            "description": "تاريخ النهاية (افتراضي: الآن)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2025-08-30T23:59:59.000Z"
            }
          },
          {
            "name": "groupBy",
            "in": "query",
            "description": "طريقة التجميع (افتراضي: day)",
            "schema": {
              "type": "string",
              "enum": [
                "hour",
                "day",
                "week",
                "month"
              ],
              "example": "day"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد النقرات عبر الوقت بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "date": {
                            "type": "string",
                            "format": "date",
                            "example": "2025-09-01"
                          },
                          "clicks": {
                            "type": "integer",
                            "example": 35
                          }
                        }
                      }
                    },
                    "errors": {
                      "type": "array",
                      "items": {},
                      "example": []
                    },
                    "code": {
                      "type": "number",
                      "example": 0
                    },
                    "errorCode": {
                      "type": "string",
                      "example": "NO_ERROR"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/RateLimitExceeded"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/analytics/geography": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "الإحصائيات الجغرافية",
        "description": "توزيع النقرات حسب البلد والموقع الجغرافي",
        "operationId": "getGeographicStats",
        "parameters": [
          {
            "name": "alias",
            "in": "query",
            "description": "الاسم المستعار للرابط المختصر",
            "required": true,
            "schema": {
              "type": "string",
              "example": "myalias123"
            }
          },
          {
            "name": "startDate (UTC)",
            "in": "query",
            "description": "تاريخ البداية (افتراضي: 30 يوماً مضت)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2025-08-01T00:00:00.000Z"
            }
          },
          {
            "name": "endDate (UTC)",
            "in": "query",
            "description": "تاريخ النهاية (افتراضي: الآن)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2028-08-30T23:59:59.000Z"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد الإحصائيات الجغرافية بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "country": {
                            "type": "string",
                            "example": "Egypt"
                          },
                          "count": {
                            "type": "integer",
                            "example": 450
                          },
                          "percentage": {
                            "type": "number",
                            "example": 36.0
                          }
                        }
                      }
                    },
                    "errors": {
                      "type": "array",
                      "items": {},
                      "example": []
                    },
                    "code": {
                      "type": "number",
                      "example": 0
                    },
                    "errorCode": {
                      "type": "string",
                      "example": "NO_ERROR"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/RateLimitExceeded"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
    "/analytics/referers": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "إحصائيات المصادر",
        "description": "المواقع والمصادر التي أتت منها النقرات",
        "operationId": "getRefererStats",
        "parameters": [
          {
            "name": "alias",
            "in": "query",
            "description": "الاسم المستعار للرابط المختصر",
            "required": true,
            "schema": {
              "type": "string",
              "example": "myalias123"
            }
          },
          {
            "name": "startDate",
            "in": "query",
            "description": "تاريخ البداية (افتراضي: 30 يوماً مضت)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2025-08-01T00:00:00.000Z"
            }
          },
          {
            "name": "endDate",
            "in": "query",
            "description": "تاريخ النهاية (افتراضي: الآن)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2025-08-30T23:59:59.000Z"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد إحصائيات المصادر بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "referer": {
                            "type": "string",
                            "example": "facebook.com"
                          },
                          "count": {
                            "type": "integer",
                            "example": 320
                          }
                        }
                      }
                    },
                    "errors": {
                      "type": "array",
                      "items": {},
                      "example": []
                    },
                    "code": {
                      "type": "number",
                      "example": 0
                    },
                    "errorCode": {
                      "type": "string",
                      "example": "NO_ERROR"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/RateLimitExceeded"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    },
     "/analytics/hourly": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "summary": "الإحصائيات بالساعة",
        "description": "توزيع النقرات حسب الساعات على مدار اليوم",
        "operationId": "getHourlyStats",
        "parameters": [
          {
            "name": "alias",
            "in": "query",
            "description": "الاسم المستعار للرابط المختصر",
            "required": true,
            "schema": {
              "type": "string",
              "example": "myalias123"
            }
          },
          {
            "name": "startDate",
            "in": "query",
            "description": "تاريخ البداية (افتراضي: 7 أيام مضت)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2025-08-24T00:00:00.000Z"
            }
          },
          {
            "name": "endDate",
            "in": "query",
            "description": "تاريخ النهاية (افتراضي: الآن)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2025-08-30T23:59:59.000Z"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "تم استرداد الإحصائيات بالساعة بنجاح",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "hour": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 23,
                            "example": 14
                          },
                          "clicks": {
                            "type": "integer",
                            "example": 85
                          }
                        }
                      }
                    },
                     "errors": {
                      "type": "array",
                      "items": {},
                      "example": []
                    },
                    "code": {
                      "type": "number",
                      "example": 0
                    },
                    "errorCode": {
                      "type": "string",
                      "example": "NO_ERROR"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "404": {
            "$ref": "#/components/responses/NotFoundError"
          },
          "429": {
            "$ref": "#/components/responses/RateLimitExceeded"
          },
          "500": {
            "$ref": "#/components/responses/InternalServerError"
          }
        }
      }
    }
  },
  "components": {
    "responses": {
      "UnauthorizedError": {
        "description": "غير مسموح لك بالوصول إلى هذا المورد.",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "data": {
                  "type": "object",
                  "example": {}
                },
                "errors": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "غير مسموح لك بتنفيذ هذا الإجراء على هذا المورد."
                  ]
                },
                "errorCode": {
                  "type": "string",
                  "example": "UNAUTHORIZED"
                },
                "code": {
                  "type": "number",
                  "example": 2
                }
              }
            }
          }
        }
      },
      "RateLimitExceeded": {
        "description": "عدد كبير من الطلبات — تم تجاوز الحد المسموح.",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "data": {
                  "type": "object",
                  "example": {}
                },
                "errors": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "لقد قمت بعدد كبير من الطلبات في وقت قصير. الرجاء الانتظار قليلاً ثم المحاولة مجددًا."
                  ]
                },
                "errorCode": {
                  "type": "string",
                  "example": "RATE_LIMIT_EXCEEDED"
                },
                "code": {
                  "type": "number",
                  "example": 5
                }
              }
            }
          }
        }
      },
      "MethodNotAllowed": {
        "description": "طريقة HTTP هذه غير مسموحة على نقطة النهاية هذه.",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "data": {
                  "type": "object",
                  "example": {}
                },
                "errors": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "طريقة الطلب (HTTP Method) غير مسموح بها على هذا المسار."
                  ]
                },
                "errorCode": {
                  "type": "string",
                  "example": "METHOD_NOT_ALLOWED"
                },
                "code": {
                  "type": "number",
                  "example": 2
                }
              }
            }
          }
        }
      },
      "ValidationError": {
        "description": "تعذّر التحقق من البيانات المدخلة، يرجى مراجعة الأخطاء.",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "data": {
                  "type": "object",
                  "example": {}
                },
                "errors": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "رابط غير صحيح",
                    "الاسم المستعار طويل جداً"
                  ]
                },
                "fieldErrors": {
                  "type": "object",
                  "additionalProperties": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "example": {
                    "original_url": [
                      "تنسيق الرابط غير صحيح"
                    ],
                    "alias": [
                      "يجب أن يكون الاسم المستعار بين 1 و 20 حرف"
                    ]
                  }
                },
                "errorCode": {
                  "type": "string",
                  "example": "VALIDATION_ERROR"
                },
                "code": {
                  "type": "number",
                  "example": 3
                }
              }
            }
          }
        }
      },
      "InternalServerError": {
        "description": "خطأ داخلي في الخادم.",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "data": {
                  "type": "object",
                  "example": {}
                },
                "errors": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "حدث خطأ غير متوقع في الخادم. يرجى المحاولة لاحقًا."
                  ]
                },
                "errorCode": {
                  "type": "string",
                  "example": "INTERNAL_SERVER_ERROR"
                },
                "code": {
                  "type": "number",
                  "example": 4
                }
              }
            }
          }
        }
      },
      "NotFoundError": {
        "description": "المورد المطلوب غير موجود.",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "data": {
                  "type": "object",
                  "example": {}
                },
                "errors": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "الرابط المختصر غير موجود"
                  ]
                },
                "errorCode": {
                  "type": "string",
                  "example": "NOT_FOUND"
                },
                "code": {
                  "type": "number",
                  "example": 6
                }
              }
            }
          }
        }
      },
      "ConflictError": {
        "description": "الطلب يتعارض مع الحالة الحالية للمورد.",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "data": {
                  "type": "object",
                  "example": {}
                },
                "errors": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "هذا الاسم المستعار غير متاح"
                  ]
                },
                "errorCode": {
                  "type": "string",
                  "example": "CONFLICT"
                },
                "code": {
                  "type": "number",
                  "example": 7
                }
              }
            }
          }
        }
      },
      "ResourceExpiredError": {
        "description": "المورد المطلوب منتهي الصلاحية.",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "data": {
                  "type": "object",
                  "example": {}
                },
                "errors": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "example": [
                    "انتهت صلاحية رمز التحقق"
                  ]
                },
                "errorCode": {
                  "type": "string",
                  "example": "RESOURCE_EXPIRED"
                },
                "code": {
                  "type": "number",
                  "example": 8
                }
              }
            }
          }
        }
      }
    },
    "securitySchemes": {
      "BearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "رمز Bearer للمصادقة"
      }
    }
  },
  "security": [
    {
      "BearerAuth": []
    }
  ]
}